function drawCandle(ctx, width, height, o, h, l, c, tCourant, tMax, yMax, yGap, candlePreferredWidth) {
    var candleWidthMax = width / tMax;
    var marginLeft = (candleWidthMax - candlePreferredWidth) / 2.0;

    console.log(yGap);
    //draw h and l
    ctx.fillStyle = "#000000";
    ctx.fillRect(candleWidthMax * tCourant + (candlePreferredWidth / 2.0 - 0.5) + marginLeft, height / yMax * (h - yGap), 1.0, height / yMax * (l - h));

    //draw o and c
    if (o > c)
        ctx.fillStyle = "#FC4723";
    else if (o < c)
        ctx.fillStyle = "#27FC23";
    else
        ctx.fillStyle = "#FFFFFF";

    ctx.fillRect(candleWidthMax * tCourant + marginLeft, height / yMax * (o - yGap), candlePreferredWidth, height / yMax * (c - o));
    ctx.strokeRect(candleWidthMax * tCourant + marginLeft, height / yMax * (o - yGap), candlePreferredWidth, height / yMax * (c - o));

}

function writeCandleArray(c,ctx, arr) {

    console.log(c.width+" - "+c.height);

    var tMax = arr.length;
    var yMax = 0;
    var yMin = arr[0][0];
    var candlePreferedSize = 10.0;

    if (tMax * candlePreferedSize > c.width)
        tMax = c.width / candlePreferedSize;

    tMax=tMax*0.78;

    for (var a = 0; a < tMax; a++) {
        for (var b = 0; b < arr[a].length; b++) {
            if (yMax < arr[a][b])
                yMax = arr[a][b]
            if (yMin > arr[a][b])
                yMin = arr[a][b];
        }
    }


    for (var a = 0; a < tMax; a++)
        drawCandle(ctx, c.width, c.height, arr[a][0], arr[a][1], arr[a][2], arr[a][3], a, tMax, yMax, (yMax - yMin), candlePreferedSize);
}

var tbl = [
    [92.500000, 93.945000, 92.467499, 93.462502],
    [93.852501, 94.654999, 93.057503, 93.172501],
    [94.180000, 95.375000, 94.089996, 95.342499],
    [96.262497, 96.317497, 94.672501, 95.752502],
    [95.334999, 95.980003, 94.705002, 95.919998],
    [97.264999, 99.955002, 95.257500, 95.477501],
    [94.839996, 97.254997, 93.877502, 97.057503],
    [98.989998, 99.247498, 96.489998, 97.724998],
    [96.562500, 97.404999, 95.904999, 96.522499],
    [96.987503, 97.147499, 95.839996, 96.327499],
    [96.417503, 98.500000, 96.062500, 98.357498],
    [99.172501, 99.250000, 96.742500, 97.000000],
    [96.692497, 97.974998, 96.602501, 97.272499],
    [96.997498, 97.077499, 92.010002, 92.845001],
    [90.987503, 92.970001, 89.144997, 92.614998],
    [93.709999, 94.904999, 93.480003, 94.809998],
    [94.367500, 94.550003, 93.247498, 93.252502],
    [93.750000, 95.230003, 93.712502, 95.040001],
    [94.187500, 96.297501, 93.767502, 96.190002],
    [102.885002, 106.415001, 100.824997, 106.260002],
    [108.199997, 111.637497, 107.892502, 108.937500],
    [109.132500, 110.790001, 108.387497, 109.665001],
    [109.377502, 110.392502, 108.897499, 110.062500],
    [110.404999, 114.412498, 109.797501, 113.902496],
    [113.205002, 113.675003, 110.292503, 111.112503],
    [112.599998, 113.775002, 110.000000, 112.727501],
    [111.970001, 112.482498, 109.107498, 109.375000],
    [110.497498, 113.275002, 110.297501, 113.010002],
    [114.430000, 116.042503, 113.927498, 115.010002],
    [114.830002, 115.000000, 113.044998, 114.907501],
    [116.062500, 116.087502, 113.962502, 114.607498],
    [114.352501, 116.000000, 114.007500, 115.562500],
    [115.982498, 117.162498, 115.610001, 115.707497],
    [115.750000, 118.392502, 115.732498, 118.275002],
    [119.262497, 124.867500, 119.250000, 124.370003],
    [128.697495, 128.785004, 123.937500, 125.857498],
    [124.697502, 125.180000, 123.052498, 124.824997],
    [126.180000, 126.992500, 125.082497, 126.522499],
    [127.142502, 127.485001, 123.832497, 125.010002],
    [126.012497, 126.442497, 124.577499, 124.807503],
    [127.580002, 131.000000, 126.000000, 129.039993],
    [132.759995, 134.800003, 130.529999, 134.179993],
    [137.589996, 137.979996, 127.000000, 131.399994],
    [126.910004, 128.839996, 120.500000, 120.879997],
    [120.070000, 123.699997, 110.889999, 120.959999],
    [113.949997, 118.989998, 112.680000, 112.820000],
    [117.260002, 119.139999, 115.260002, 117.320000],
    [120.360001, 120.500000, 112.500000, 113.489998],
    [114.570000, 115.230003, 110.000000, 112.000000],
    [114.720001, 115.930000, 112.800003, 115.360001],
    [118.330002, 118.830002, 113.610001, 115.540001],
    [115.230003, 116.000000, 112.040001, 112.129997],
    [109.720001, 112.199997, 108.709999, 110.339996],
    [110.400002, 110.879997, 106.089996, 106.839996],
    [104.540001, 110.190002, 103.099998, 110.080002],
    [112.680000, 112.860001, 109.160004, 111.809998],
    [111.620003, 112.110001, 106.769997, 107.120003],
    [105.169998, 110.250000, 105.000000, 108.220001],
    [108.430000, 112.440002, 107.669998, 112.279999],
    [115.010002, 115.320000, 112.779999, 114.959999],
    [114.550003, 115.309998, 113.570000, 114.089996],
    [113.790001, 117.260002, 113.620003, 115.809998],
    [117.639999, 117.720001, 115.830002, 116.790001],
    [112.889999, 115.370003, 112.220001, 113.019997],
    [113.910004, 116.650002, 113.550003, 116.500000],
    [115.699997, 116.120003, 112.250000, 113.160004],
    [114.620003, 115.550003, 114.129997, 115.080002],
    [116.250000, 116.400002, 114.589996, 114.970001],
    [115.279999, 117.000000, 114.919998, 116.970001],
    [120.059998, 125.180000, 119.279999, 124.400002],
    [125.269997, 125.389999, 119.650002, 121.099998],
    [121.000000, 123.029999, 119.620003, 121.190002],
    [118.720001, 121.199997, 118.150002, 120.709999],
    [121.279999, 121.550003, 118.809998, 119.019997],
    [119.959999, 120.419998, 115.660004, 115.980003],
    [116.199997, 118.980003, 115.629997, 117.510002],
    [116.669998, 118.709999, 116.449997, 116.870003],
    [117.449997, 118.040001, 114.589996, 115.750000],
    [116.389999, 116.550003, 114.279999, 115.040001],
    [114.010002, 116.550003, 112.879997, 115.050003],
    [115.489998, 117.279999, 114.540001, 116.599998],
    [115.050003, 115.430000, 111.099998, 111.199997],
    [112.370003, 116.930000, 112.199997, 115.320000],
    [111.059998, 111.989998, 107.720001, 108.860001],
    [109.110001, 110.680000, 107.320000, 108.769997],
    [109.660004, 111.489998, 108.730003, 110.440002],
    [114.139999, 115.589996, 112.349998, 114.949997],
    [117.949997, 119.620003, 116.870003, 119.029999],
    [118.320000, 119.199997, 116.129997, 118.690002],
    [120.500000, 121.989998, 116.050003, 116.320000],
    [115.550003, 117.589996, 114.129997, 115.970001],
    [117.190002, 119.629997, 116.440002, 119.489998],
    [119.620003, 120.529999, 118.570000, 119.209999],
    [119.440002, 119.669998, 117.870003, 119.260002],
    [118.919998, 120.989998, 118.150002, 120.300003],
    [119.550003, 120.669998, 118.959999, 119.389999],
    [118.610001, 119.820000, 118.000000, 118.029999],
    [117.589996, 119.059998, 116.809998, 118.639999],
    [118.639999, 118.769997, 117.290001, 117.339996],
    [117.180000, 117.620003, 113.750000, 113.849998],
    [113.910004, 115.849998, 112.589996, 115.169998],
    [115.550003, 116.750000, 115.169998, 116.029999],
    [116.570000, 117.489998, 116.220001, 116.589996],
    [116.970001, 120.970001, 116.809998, 119.050003],
    [121.010002, 123.470001, 120.010002, 122.720001],
    [122.019997, 123.370003, 120.889999, 123.080002],
    [123.519997, 123.779999, 122.209999, 122.940002],
    [122.599998, 122.860001, 121.519997, 122.250000],
    [122.309998, 124.570000, 122.250000, 123.750000],
    [124.370003, 124.980003, 123.089996, 124.379997],
    [124.529999, 125.949997, 121.000000, 121.779999],
    [120.500000, 123.870003, 120.150002, 123.239998],
    [122.430000, 122.760002, 120.550003, 122.410004],
    [122.599998, 123.349998, 121.540001, 121.779999],
    [124.339996, 127.900002, 124.129997, 127.879997],
    [127.410004, 128.369995, 126.559998, 127.809998],
    [128.899994, 129.580002, 128.039993, 128.699997],
    [128.960007, 129.100006, 126.120003, 126.660004],
    [125.019997, 128.309998, 123.449997, 128.229996],
    [131.610001, 134.410004, 129.649994, 131.880005],
    [132.160004, 132.429993, 130.779999, 130.960007],
    [131.320007, 133.460007, 131.100006, 131.970001],
    [133.990005, 137.339996, 133.509995, 136.690002],
    [138.050003, 138.789993, 134.339996, 134.869995],
    [135.580002, 135.990005, 133.399994, 133.720001],
    [134.080002, 134.740005, 131.720001, 132.690002],
    [133.520004, 133.610001, 126.760002, 129.410004],
    [128.889999, 131.740005, 128.429993, 131.009995],
    [127.720001, 131.050003, 126.379997, 126.599998],
    [128.360001, 131.630005, 127.860001, 130.919998],
    [132.429993, 132.630005, 130.229996, 132.050003],
    [129.190002, 130.169998, 128.500000, 128.979996],
    [128.500000, 129.690002, 126.860001, 128.800003],
    [128.759995, 131.449997, 128.490005, 130.889999],
    [130.800003, 131.000000, 128.759995, 128.910004],
    [128.779999, 130.220001, 127.000000, 127.139999],
    [127.779999, 128.710007, 126.940002, 127.830002],
    [128.660004, 132.490005, 128.550003, 132.029999],
    [133.800003, 139.669998, 133.589996, 136.869995],
    [136.279999, 139.850006, 135.020004, 139.070007],
    [143.070007, 145.089996, 136.539993, 142.919998],
    [143.600006, 144.300003, 141.369995, 143.160004],
    [143.429993, 144.300003, 140.410004, 142.059998],
    [139.520004, 141.990005, 136.699997, 137.089996],
    [135.830002, 136.740005, 130.210007, 131.960007],
    [133.750000, 135.380005, 130.929993, 134.139999],
    [135.729996, 136.309998, 134.610001, 134.990005],
    [135.759995, 135.770004, 133.610001, 133.940002],
    [136.300003, 137.399994, 134.589996, 137.389999],
    [137.350006, 137.419998, 135.860001, 136.759995],
    [136.029999, 136.960007, 134.919998, 136.910004],
    [136.619995, 137.880005, 135.850006, 136.009995],
    [136.479996, 136.990005, 134.399994, 135.389999],
    [135.899994, 136.389999, 133.770004, 135.130005],
    [134.350006, 135.529999, 133.690002, 135.369995],
    [135.490005, 136.009995, 132.789993, 133.190002],
    [131.250000, 132.220001, 129.470001, 130.839996],
    [129.199997, 130.000000, 127.410004, 129.710007],
    [130.240005, 130.710007, 128.800003, 129.869995],
    [128.009995, 129.720001, 125.599998, 126.000000],
    [123.760002, 126.709999, 118.389999, 125.860001],
    [124.940002, 125.559998, 122.230003, 125.349998],
    [124.680000, 126.459999, 120.540001, 120.989998],
    [122.589996, 124.849998, 121.199997, 121.260002],
    [123.750000, 127.930000, 122.790001, 127.790001],
    [128.410004, 128.720001, 125.010002, 125.120003],
    [124.809998, 125.709999, 121.839996, 122.059998],
    [121.750000, 123.599998, 118.620003, 120.129997],
    [120.980003, 121.940002, 117.570000, 121.419998],
    [120.930000, 121.000000, 116.209999, 116.360001],
    [119.029999, 122.059998, 118.790001, 121.089996],
    [121.690002, 122.169998, 119.449997, 119.980003],
    [122.540001, 123.209999, 121.260002, 121.959999],
    [120.400002, 121.169998, 119.160004, 121.029999],
    [121.410004, 124.000000, 120.419998, 123.989998],
    [125.699997, 127.220001, 124.720001, 125.570000],
    [124.050003, 125.860001, 122.339996, 124.760002],
    [122.879997, 123.180000, 120.320000, 120.529999],
    [119.900002, 121.430000, 119.680000, 119.989998],
    [120.330002, 123.870003, 120.260002, 123.389999],
    [123.330002, 124.239998, 122.139999, 122.540001],
    [122.820000, 122.900002, 120.070000, 120.089996],
    [119.540001, 121.660004, 119.000000, 120.589996],
    [120.349998, 121.480003, 118.919998, 121.209999],
    [121.650002, 122.580002, 120.730003, 121.389999],
    [120.110001, 120.400002, 118.860001, 119.900002],
    [121.650002, 123.519997, 121.150002, 122.150002],
    [123.660004, 124.180000, 122.489998, 123.000000],
    [123.870003, 126.160004, 123.070000, 125.900002],
    [126.500000, 127.129997, 125.650002, 126.209999],
    [125.830002, 127.919998, 125.139999, 127.900002],
    [128.949997, 130.389999, 128.520004, 130.360001],
    [129.800003, 133.039993, 129.470001, 133.000000],
    [132.520004, 132.850006, 130.630005, 131.240005],
    [132.440002, 134.660004, 131.929993, 134.429993],
    [134.940002, 135.000000, 131.660004, 132.029999],
    [133.820007, 135.000000, 133.639999, 134.500000],
    [134.300003, 134.669998, 133.279999, 134.160004],
    [133.509995, 135.470001, 133.339996, 134.839996],
    [135.020004, 135.529999, 131.809998, 133.110001],
    [132.360001, 133.750000, 131.300003, 133.500000],
    [133.039993, 134.149994, 131.410004, 131.940002],
    [132.160004, 135.119995, 132.160004, 134.320007],
    [134.830002, 135.059998, 133.559998, 134.720001],
    [135.009995, 135.410004, 134.110001, 134.389999],
    [134.309998, 135.020004, 133.080002, 133.580002],
    [136.470001, 137.070007, 132.449997, 133.479996],
    [131.779999, 133.559998, 131.070007, 131.460007],
    [132.039993, 134.070007, 131.830002, 132.539993],
    [131.190002, 131.490005, 126.699997, 127.849998],
    [129.199997, 130.449997, 127.970001, 128.100006],
    [127.889999, 129.750000, 127.129997, 129.740005],
    [130.850006, 131.259995, 129.479996, 130.210007],
    [129.410004, 129.539993, 126.809998, 126.849998],
    [123.500000, 126.269997, 122.769997, 125.910004],
    [123.400002, 124.639999, 122.250000, 122.769997],
    [124.580002, 126.150002, 124.260002, 124.970001],
    [126.250000, 127.889999, 125.849998, 127.449997],
    [126.820000, 126.930000, 125.169998, 126.269997],
    [126.559998, 126.989998, 124.779999, 124.849998],
    [123.160004, 124.919998, 122.860001, 124.690002],
    [125.230003, 127.720001, 125.099998, 127.309998],
    [127.820000, 128.000000, 125.209999, 125.430000],
    [126.010002, 127.940002, 125.940002, 127.099998],
    [127.820000, 128.320007, 126.320000, 126.900002],
    [126.959999, 127.389999, 126.419998, 126.849998],
    [126.440002, 127.639999, 125.080002, 125.279999],
    [125.570000, 125.800003, 124.550003, 124.610001],
    [125.080002, 125.349998, 123.940002, 124.279999],
    [124.279999, 125.239998, 124.050003, 125.059998],
    [124.680000, 124.849998, 123.129997, 123.540001],
    [124.070000, 126.160004, 123.849998, 125.889999],
    [126.169998, 126.320000, 124.830002, 125.900002],
    [126.599998, 128.460007, 126.209999, 126.739998],
    [127.209999, 127.750000, 126.519997, 127.129997],
    [127.019997, 128.190002, 125.940002, 126.110001],
    [126.529999, 127.440002, 126.099998, 127.349998],
    [127.820000, 130.539993, 127.070000, 130.479996],
    [129.940002, 130.600006, 129.389999, 129.639999],
    [130.369995, 130.889999, 128.460007, 130.149994],
    [129.800003, 132.550003, 129.649994, 131.789993],
    [130.710007, 131.509995, 130.240005, 130.460007],
    [130.300003, 132.410004, 129.210007, 132.300003],
    [132.130005, 134.080002, 131.619995, 133.979996],
    [133.770004, 134.320007, 133.229996, 133.699997],
    [134.449997, 134.639999, 132.929993, 133.410004],
    [133.460007, 133.889999, 132.809998, 133.110001],
    [133.410004, 135.250000, 133.350006, 134.779999],
    [134.800003, 136.490005, 134.350006, 136.330002],
    [136.169998, 137.410004, 135.869995, 136.960007],
    [136.600006, 137.330002, 135.759995, 137.270004],
    [137.899994, 140.000000, 137.750000, 139.960007],
    [140.070007, 143.149994, 140.089996, 142.020004]
]

function initCanvas(){
    var c = document.getElementById("canvasStoch");
    c.width=c.parentElement.clientWidth;
    c.height=c.parentElement.clientHeight;
    var ctx = c.getContext("2d");
    writeCandleArray(c, ctx, tbl);
}

window.onresize = function(){
    initCanvas();
}

document.addEventListener("DOMContentLoaded", function(){
    initCanvas();
});